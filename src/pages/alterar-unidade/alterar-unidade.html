<ion-header>
</ion-header> 

<ion-content padding>
  <br>
  <div class='container'>
    <ion-icon name='arrow-round-back' large class='back' (click)="voltar()"></ion-icon>
    <h3 style="text-align:center">Administrador</h3>
    <ion-list class="list">
      <p style="text-align:center">Alterar unidade</p>
      <ion-item>
        <ion-label>Unidade</ion-label>
        <ion-select [(ngModel)]="unidade.key" class="select" (ionChange)="exibirUnidadeSelecionada(unidade.key)">
          <ion-option class="option" *ngFor='let unidade of unidades' value={{unidade.key}}>{{unidade.nomeUnidade}}</ion-option>
        </ion-select>
      </ion-item>
      <pre></pre>
      <form padding [formGroup]='unidadeForm' novalidate class="list" *ngIf='unidadeSelecionada.length > 0'> 
      <!-- <ion-list class="list" *ngIf='unidadeSelecionada.length > 0'> -->
        <ion-item *ngFor='let unidadeSel of unidadeSelecionada'>
          <ion-label>
            Nome da unidade
          </ion-label>
          <ion-input type="text" [(ngModel)]="unidade.nomeUnidade" formControlName="nomeUnidade" placeholder="{{unidadeSel.nomeUnidade}}"></ion-input>
        </ion-item>
        <h6 *ngIf='erroUnidadeJa' class='error'>{{messageUnidadeJa}}</h6>
        <ion-item *ngFor='let unidadeSel of unidadeSelecionada'>
          <ion-label>
            EndereÃ§o
          </ion-label>
          <ion-input type="text" [(ngModel)]="unidade.endereco" formControlName="endereco" placeholder="{{unidadeSel.endereco}}"></ion-input>
        </ion-item>
        <ion-item *ngFor='let unidadeSel of unidadeSelecionada'>
          <ion-label>
            Telefone
          </ion-label>
          <ion-input type="tel" [(ngModel)]="unidade.telefone" formControlName="telefone" placeholder="{{unidadeSel.telefone}}" [brmasker]="{mask:'(99) 99999-9999', len:15, type: 'num'}"></ion-input>
        </ion-item>
        <pre></pre>
        <h6 *ngIf='erroUnidade' class='error'>{{messageUnidade}}</h6>
        <ion-buttons class='acessos'>
          <button class='botao-acessa' ion-button (click)="voltar()">Voltar</button> 
          <button class='fica' ion-button (click)="alteraUnidade(unidade.key, unidade)">Alterar Unidade</button>
        </ion-buttons>
      </form>
    </ion-list>
  </div>
</ion-content>